"use strict";(self["webpackChunkcallcenter_frontend"]=self["webpackChunkcallcenter_frontend"]||[]).push([[308],{8308:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var a=function(){var e=this,t=e._self._c;return t("div",{},[t("b-loading",{attrs:{"is-full-page":!1},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),t("b-button",{staticClass:"mb-4",attrs:{label:"Nuevo","icon-left":"plus",type:"is-primary",tag:"router-link",to:{name:"DepartmentsCreate"}}}),t("b-table",{attrs:{striped:"",checkable:"",type:"",height:"70vh","sticky-header":"",data:e.departments}},[t("b-table-column",{attrs:{field:"peer_id",label:"Peer ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.peer_id)+" ")]}}])}),t("b-table-column",{attrs:{field:"name",label:"Nombre"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),t("b-table-column",{attrs:{field:"actions",label:""},scopedSlots:e._u([{key:"default",fn:function(n){return[t("b-button",{staticClass:"mx-2 is-small",attrs:{tag:"router-link",to:{name:"DepartmentsEdit",params:{id:n.row.id}},"icon-left":"edit",type:"is-info"}}),t("b-button",{staticClass:"is-small",attrs:{"icon-left":"trash-alt",type:"is-danger"},on:{click:function(t){return e.deleteDepartment(n.row.id)}}})]}}])})],1)],1)},s=[],i=n(3822),o=n(4652),r=n(5508),l=n(1920),d={name:"DepartmentsIndex",data(){return{departments:[],loading:!1}},mounted(){this.getDepartments()},methods:{getDepartments(){this.loading=!0,this.axios.get("departments",{headers:{token:this.token}}).then((e=>{this.departments=e.data})).catch(l.J).finally((()=>{this.loading=!1}))},deleteDepartment(e){r.K({onConfirm:()=>{this.loading=!0,this.axios.delete(`departments/${e}/destroy`,{headers:{token:this.token}}).then((()=>{o.SUCCESS(),this.getDepartments()})).catch(l.J).finally((()=>{this.loading=!1}))}})}},computed:{...(0,i.rn)(["token"])}},u=d,c=n(1001),p=(0,c.Z)(u,a,s,!1,null,null,null),m=p.exports},5508:function(e,t,n){n.d(t,{K:function(){return s}});var a=n(571);const s=({title:e="¿Seguro de Eliminar?",message:t="Esta acción no se puede deshacer!",type:n="is-danger",onConfirm:s}={})=>{a.q.confirm({title:e,message:t,type:n,onConfirm:s})}},4652:function(e,t,n){n.r(t),n.d(t,{ERROR:function(){return i},INVALID_TOKEN:function(){return r},SERVER_ERROR:function(){return o},SUCCESS:function(){return s}});var a=n(1806);const s=({message:e="Operación realizada Correctamente",type:t="is-info",duration:n=2e3,position:s="is-bottom"}={})=>{a.V.open({message:e,type:t,duration:n,position:s})},i=({message:e="Operación Fallida!",type:t="is-danger",duration:n=2e3,position:s="is-bottom"}={})=>{a.V.open({message:e,type:t,duration:n,position:s})},o=({message:e="Ocurrió un problema en el Servidor",type:t="is-danger",duration:n=3e3,position:s="is-bottom",queue:i=!0}={})=>{a.V.open({message:e,type:t,duration:n,position:s,queue:i})},r=({message:e="El token de acceso no es válido, favor vuelva a iniciar sesión",type:t="is-danger",duration:n=3e3,position:s="is-bottom"}={})=>{a.V.open({message:e,type:t,duration:n,position:s})}},1920:function(e,t,n){n.d(t,{J:function(){return s}});const a=n(4652),s=({response:e})=>{switch(e.status){case 401:a.NO_TOKEN();break;case 403:a.ERROR({message:e.data.message});break;case 404:a.ERROR({message:e.data.message});break;case 500:e.data.forEach((e=>{a.SERVER_ERROR({message:e.message})}));break}}}}]);
//# sourceMappingURL=308.95bd8a3d.js.map